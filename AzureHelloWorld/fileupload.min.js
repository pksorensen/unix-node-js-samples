var file=require("./modules/fileupload_file"),async=require("async"),FileUpload=function(){function n(n){this.uploadDelegate=n.adapter||new file.filesystem(n),console.log(this.uploadDelegate)}return n.prototype.middleware=function(n,t,i){var r=this;if(typeof n.files=="undefined"||Object.keys(n.files).length===0)return i();async.each(Object.keys(n.files),function(t,i){var u=n.files[t],f=[];Array.isArray(u)||(u=[u]),async.each(u,function(n,t){if(f=[],typeof n.path=="undefined"||n.size===0)return t(null);console.log(r.uploadDelegate),r.uploadDelegate.put(n,function(n,i){f.push(i),t(null)})},function(r){console.log(r),console.log(t),console.log(f),n.body[t]=f,i(null)})},i)},n}();exports.FileUpload=FileUpload